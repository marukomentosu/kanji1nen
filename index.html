<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ä¸€å¹´ç”Ÿæ¼¢å­—ç·´ç¿’ - æç”»æœ€å‰é¢ç‰ˆ</title>
    <style>
        /* æ•™ç§‘æ›¸ä½“ãƒ•ã‚©ãƒ³ãƒˆã®æŒ‡å®š */
        @font-face {
            font-family: 'CustomKyokasho';
            src: local('Yu Kyokasho'), local('YuKyokasho'), 
                 local('UD Digi Kyokasho NK-R'), local('UD ãƒ‡ã‚¸ã‚¿ãƒ« æ•™ç§‘æ›¸ä½“ NK-R'),
                 local('HGKyokashotai'), local('HGæ•™ç§‘æ›¸ä½“'),
                 local('Kyokasho ICA Pro M'), local('AR Pæ•™ç§‘æ›¸ä½“M');
        }

        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background-color: #fff;
            font-family: 'CustomKyokasho', "Hiragino Mincho ProN", serif;
        }

        /* æ•´ç†ã•ã‚ŒãŸæ“ä½œãƒ‘ãƒãƒ« */
        .ui-panel {
            position: fixed;
            top: 15px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 100; /* ãƒœã‚¿ãƒ³é¡ã¯ä¸€ç•ªä¸Š */
            display: flex;
            gap: 8px;
            background: rgba(255, 255, 255, 0.9);
            padding: 8px 15px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.15);
            backdrop-filter: blur(8px);
            align-items: center;
            border: 1px solid #ddd;
            width: auto;
            max-width: 95vw;
        }

        .yomi-info {
            position: fixed;
            top: 85px;
            width: 100%;
            text-align: center;
            font-size: clamp(18px, 4vw, 26px);
            color: #34495e;
            z-index: 10;
            font-weight: bold;
            pointer-events: none;
        }

        /* è£œåŠ©ç·š */
        .grid-lines {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1; /* ä¸€ç•ªå¥¥ */
        }
        .line-h { position: absolute; top: 50%; left: 0; width: 100%; height: 1px; border-top: 2px dashed #eee; }
        .line-v { position: absolute; left: 50%; top: 0; width: 1px; height: 100%; border-left: 2px dashed #eee; }

        #guide {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 80vh;
            color: rgba(0, 0, 0, 0.06);
            user-select: none;
            pointer-events: none;
            z-index: 2; /* è£œåŠ©ç·šã‚ˆã‚Šä¸Šã§ã€ã‚­ãƒ£ãƒ³ãƒã‚¹ã‚ˆã‚Šä¸‹ */
            font-family: 'CustomKyokasho', serif;
        }

        /* ã‚­ãƒ£ãƒ³ãƒã‚¹ï¼ˆæ›¸ãå ´æ‰€ï¼‰ */
        canvas {
            display: block;
            touch-action: none;
            position: relative;
            z-index: 50; /* ãŠæ‰‹æœ¬ï¼ˆz-index: 2ï¼‰ã‚ˆã‚Šã‚‚æ‰‹å‰ã«é…ç½® */
            background-color: transparent; /* ä¸‹ã®ãŠæ‰‹æœ¬ãŒè¦‹ãˆã‚‹ã‚ˆã†ã«é€æ˜åŒ– */
        }

        /* ãƒœã‚¿ãƒ³é¡ã®æ•´ç† */
        select {
            padding: 8px;
            font-size: 16px;
            border-radius: 8px;
            border: 1px solid #ccc;
            background: #fafafa;
        }

        .btn {
            padding: 8px 16px;
            font-size: 14px;
            font-weight: bold;
            border-radius: 10px;
            border: none;
            cursor: pointer;
            transition: 0.2s;
            color: white;
            white-space: nowrap;
        }

        .btn-clear { background-color: #95a5a6; }
        .btn-next { background-color: #3498db; }
        .btn-random { background-color: #e67e22; }

        .btn:active { transform: scale(0.95); opacity: 0.8; }

        @media (max-width: 600px) {
            .ui-panel { padding: 6px 10px; gap: 5px; }
            .btn { padding: 8px 10px; font-size: 12px; }
            #guide { font-size: 70vw; }
        }
    </style>
</head>
<body>

    <div class="ui-panel">
        <select id="char-selector"></select>
        <button class="btn btn-clear" onclick="clearCanvas()">ã‘ã™</button>
        <button class="btn btn-random" onclick="randomChar()">ğŸ² ãƒ©ãƒ³ãƒ€ãƒ </button>
        <button class="btn btn-next" onclick="nextChar()">ã¤ãã¸ â–¶</button>
    </div>

    <div id="yomi" class="yomi-info"></div>

    <div class="grid-lines">
        <div class="line-h"></div>
        <div class="line-v"></div>
    </div>

    <div id="guide"></div>

    <canvas id="paintCanvas"></canvas>

    <script>
        const canvas = document.getElementById('paintCanvas');
        const ctx = canvas.getContext('2d');
        const guide = document.getElementById('guide');
        const yomiDiv = document.getElementById('yomi');
        const selector = document.getElementById('char-selector');
        
        const kanjiData = [
            {k:"ä¸€", y:"ã‚¤ãƒãƒ»ã²ã¨ã¤"}, {k:"äºŒ", y:"ãƒ‹ãƒ»ãµãŸã¤"}, {k:"ä¸‰", y:"ã‚µãƒ³ãƒ»ã¿ã£ã¤"}, {k:"å››", y:"ã‚·ãƒ»ã‚ˆã£ã¤"}, {k:"äº”", y:"ã‚´ãƒ»ã„ã¤ã¤"},
            {k:"å…­", y:"ãƒ­ã‚¯ãƒ»ã‚€ã£ã¤"}, {k:"ä¸ƒ", y:"ã‚·ãƒãƒ»ãªãªã¤"}, {k:"å…«", y:"ãƒãƒãƒ»ã‚„ã£ã¤"}, {k:"ä¹", y:"ã‚­ãƒ¥ã‚¦ãƒ»ã“ã“ã®ã¤"}, {k:"å", y:"ã‚¸ãƒ¥ã‚¦ãƒ»ã¨ãŠ"},
            {k:"ç™¾", y:"ãƒ’ãƒ£ã‚¯"}, {k:"åƒ", y:"ã‚»ãƒ³"}, {k:"ä¸Š", y:"ã‚¸ãƒ§ã‚¦ãƒ»ã†ãˆ"}, {k:"ä¸‹", y:"ã‚«ãƒ»ã—ãŸ"}, {k:"å·¦", y:"ã‚µãƒ»ã²ã ã‚Š"},
            {k:"å³", y:"ã‚¦ãƒ»ã¿ã"}, {k:"ä¸­", y:"ãƒãƒ¥ã‚¦ãƒ»ãªã‹"}, {k:"å¤§", y:"ãƒ€ã‚¤ãƒ»ãŠãŠãã„"}, {k:"å°", y:"ã‚·ãƒ§ã‚¦ãƒ»ã¡ã„ã•ã„"}, {k:"æœˆ", y:"ã‚²ãƒ„ãƒ»ã¤ã"},
            {k:"ç«", y:"ã‚«ãƒ»ã²"}, {k:"æ°´", y:"ã‚¹ã‚¤ãƒ»ã¿ãš"}, {k:"æœ¨", y:"ãƒ¢ã‚¯ãƒ»ã"}, {k:"é‡‘", y:"ã‚­ãƒ³ãƒ»ã‹ã­"}, {k:"åœŸ", y:"ãƒ‰ãƒ»ã¤ã¡"},
            {k:"æ—¥", y:"ãƒ‹ãƒãƒ»ã²"}, {k:"å¹´", y:"ãƒãƒ³ãƒ»ã¨ã—"}, {k:"æ—©", y:"ã‚½ã‚¦ãƒ»ã¯ã‚„ã„"}, {k:"ç™½", y:"ãƒã‚¯ãƒ»ã—ã‚"}, {k:"èµ¤", y:"ã‚»ã‚­ãƒ»ã‚ã‹"},
            {k:"é’", y:"ã‚»ã‚¤ãƒ»ã‚ãŠ"}, {k:"å¤•", y:"ã‚»ã‚­ãƒ»ã‚†ã†"}, {k:"ç©º", y:"ã‚¯ã‚¦ãƒ»ãã‚‰"}, {k:"å¤©", y:"ãƒ†ãƒ³ãƒ»ã‚ã‚"}, {k:"å±±", y:"ã‚µãƒ³ãƒ»ã‚„ã¾"},
            {k:"å·", y:"ã‚»ãƒ³ãƒ»ã‹ã‚"}, {k:"æ—", y:"ãƒªãƒ³ãƒ»ã¯ã‚„ã—"}, {k:"æ£®", y:"ã‚·ãƒ³ãƒ»ã‚‚ã‚Š"}, {k:"è‰", y:"ã‚½ã‚¦ãƒ»ãã•"}, {k:"èŠ±", y:"ã‚«ãƒ»ã¯ãª"},
            {k:"ç«¹", y:"ãƒã‚¯ãƒ»ãŸã‘"}, {k:"è™«", y:"ãƒãƒ¥ã‚¦ãƒ»ã‚€ã—"}, {k:"è²", y:"ã‚«ã‚¤"}, {k:"çŠ¬", y:"ã‚±ãƒ³ãƒ»ã„ã¬"}, {k:"è¶³", y:"ã‚½ã‚¯ãƒ»ã‚ã—"},
            {k:"æ‰‹", y:"ã‚·ãƒ¥ãƒ»ã¦"}, {k:"ç›®", y:"ãƒ¢ã‚¯ãƒ»ã‚"}, {k:"è€³", y:"ã‚¸ãƒ»ã¿ã¿"}, {k:"å£", y:"ã‚³ã‚¦ãƒ»ãã¡"}, {k:"å", y:"ãƒ¡ã‚¤ãƒ»ãª"},
            {k:"çŸ³", y:"ã‚»ã‚­ãƒ»ã„ã—"}, {k:"ç«‹", y:"ãƒªãƒ„ãƒ»ãŸã¤"}, {k:"å…¥", y:"ãƒ‹ãƒ¥ã‚¦ãƒ»ã¯ã„ã‚‹"}, {k:"å‡º", y:"ã‚·ãƒ¥ãƒ„ãƒ»ã§ã‚‹"}, {k:"è¦‹", y:"ã‚±ãƒ³ãƒ»ã¿ã‚‹"},
            {k:"å­—", y:"ã‚¸ãƒ»ã‚ã–"}, {k:"å­¦", y:"ã‚¬ã‚¯ãƒ»ã¾ãªã¶"}, {k:"æ ¡", y:"ã‚³ã‚¦"}, {k:"å…ˆ", y:"ã‚»ãƒ³ãƒ»ã•ã"}, {k:"ç”Ÿ", y:"ã‚»ã‚¤ãƒ»ã„ãã‚‹"},
            {k:"æ–‡", y:"ãƒ–ãƒ³ãƒ»ãµã¿"}, {k:"æœ¬", y:"ãƒ›ãƒ³ãƒ»ã‚‚ã¨"}, {k:"æ­£", y:"ã‚»ã‚¤ãƒ»ãŸã ã—ã„"}, {k:"åŠ›", y:"ãƒªãƒ§ã‚¯ãƒ»ã¡ã‹ã‚‰"}, {k:"éŸ³", y:"ã‚ªãƒ³ãƒ»ãŠã¨"},
            {k:"æ°—", y:"ã‚­"}, {k:"å††", y:"ã‚¨ãƒ³ãƒ»ã¾ã‚‹ã„"}, {k:"ç‹", y:"ã‚ªã‚¦"}, {k:"ç‰", y:"ã‚®ãƒ§ã‚¯ãƒ»ãŸã¾"}, {k:"å­", y:"ã‚·ãƒ»ã“"},
            {k:"ç”·", y:"ãƒ€ãƒ³ãƒ»ãŠã¨ã“"}, {k:"å¥³", y:"ã‚¸ãƒ§ãƒ»ãŠã‚“ãª"}, {k:"äºº", y:"ã‚¸ãƒ³ãƒ»ã²ã¨"}, {k:"ä¼‘", y:"ã‚­ãƒ¥ã‚¦ãƒ»ã‚„ã™ã‚€"}, {k:"ä½•", y:"ã‚«ãƒ»ãªã«"},
            {k:"æ‘", y:"ã‚½ãƒ³ãƒ»ã‚€ã‚‰"}, {k:"ç”º", y:"ãƒãƒ§ã‚¦ãƒ»ã¾ã¡"}, {k:"ç³¸", y:"ã‚·ãƒ»ã„ã¨"}, {k:"è»Š", y:"ã‚·ãƒ£ãƒ»ãã‚‹ã¾"}, {k:"é›¨", y:"ã‚¦ãƒ»ã‚ã‚"}
        ];

        let isDrawing = false;

        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            ctx.lineWidth = window.innerWidth < 600 ? 12 : 20;
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';
            ctx.strokeStyle = '#2c3e50';
        }

        kanjiData.forEach((item, index) => {
            const opt = document.createElement('option');
            opt.value = index;
            opt.innerHTML = item.k;
            selector.appendChild(opt);
        });

        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        function startDrawing(e) {
            isDrawing = true;
            draw(e);
        }

        function stopDrawing() {
            isDrawing = false;
            ctx.beginPath();
        }

        function draw(e) {
            if (!isDrawing) return;
            const x = (e.clientX || (e.touches && e.touches[0].clientX));
            const y = (e.clientY || (e.touches && e.touches[0].clientY));
            ctx.lineTo(x, y);
            ctx.stroke();
            ctx.beginPath();
            ctx.moveTo(x, y);
        }

        function clearCanvas() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }

        function nextChar() {
            let index = parseInt(selector.value);
            index = (index + 1) % kanjiData.length;
            selector.value = index;
            updateGuide();
        }

        function randomChar() {
            let index = Math.floor(Math.random() * kanjiData.length);
            selector.value = index;
            updateGuide();
        }

        function updateGuide() {
            const data = kanjiData[selector.value];
            guide.innerText = data.k;
            yomiDiv.innerText = "ã€ã‚ˆã¿ã€‘ " + data.y;
            clearCanvas();
        }

        canvas.addEventListener('mousedown', startDrawing);
        canvas.addEventListener('mousemove', draw);
        window.addEventListener('mouseup', stopDrawing);
        canvas.addEventListener('touchstart', (e) => { e.preventDefault(); startDrawing(e); }, {passive: false});
        canvas.addEventListener('touchmove', (e) => { e.preventDefault(); draw(e); }, {passive: false});
        canvas.addEventListener('touchend', stopDrawing);

        selector.addEventListener('change', updateGuide);
        updateGuide();

    </script>
</body>
</html>
